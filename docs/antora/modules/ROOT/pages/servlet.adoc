= Servlet

本文简单介绍 *servlet-api* 的历史版本，并提供几个基于不同 servlet-api 版本的示例程序。

== javax.servlet:servlet-api（2系列）

https://search.maven.org/artifact/javax.servlet/servlet-api[javax.servlet:servlet-api^] 的版本记录如下：

image::servlet/image-2021-06-26-15-41-51-121.png[]

其中，*3.0-alpha-1* 仍是 2 版本的延续，不支持 3 版本的新特性。

== javax.servlet:javax.servlet-api（3、4系列）

https://search.maven.org/artifact/javax.servlet/javax.servlet-api[javax.servlet:javax.servlet-api^] 的版本记录如下：

image::servlet/image-2021-06-26-19-18-10-534.png[]

== jakarta.servlet:jakarta.servlet-api（4～系列）

.根据 http://tomcat.apache.org/index.html[Apache Tomcat^] 官网的描述：
[quote,Apache Tomcat]
The Apache Tomcat® software is an open source implementation of the Jakarta Servlet, Jakarta Server Pages, Jakarta Expression Language, Jakarta WebSocket, Jakarta Annotations and Jakarta Authentication specifications.
These specifications are part of the Jakarta EE platform.

Java 替换成了 Jakarta， https://search.maven.org/artifact/jakarta.servlet/jakarta.servlet-api[jakarta.servlet:jakarta.servlet-api^] 的版本记录如下：

image::servlet/image-2021-06-26-17-23-11-910.png[]

== 总结

参考 https://en.wikipedia.org/wiki/Jakarta_Servlet[Jakarta Servlet - Wikipedia^]：

image::servlet/image-2021-06-26-22-23-32-624.png[]

== Spring Boot 中的 Servlet

Spring Boot 中使用的 Servlet，是内嵌到 Tomcat 中的，没有使用单独的 servlet-api 类库：

image::servlet/image-2021-06-26-16-20-25-977.png[]

image::servlet/image-2021-06-26-16-21-54-548.png[]

== 示例程序

http://tomcat.apache.org/whichversion.html[Apache Tomcat Versions]：

image::servlet/image-2021-06-26-17-28-54-912.png[]

=== servlet2（2.4）

https://github.com/peacetrue/samples/tree/master/servlet2[servlet2^] 使用 2.4 版本的 servlet-api，基于 web.xml 创建 `HttpServlet`。

=== servlet3（3.1.0）

https://github.com/peacetrue/samples/tree/master/servlet3[servlet3^] 使用 3.1.0 版本的 servlet-api，支持注解和编程创建 `HttpServlet`。

==== 如何控制 Filter 的顺序

无法使用 `@WebFilter` 控制 filters 的顺序，只能使用 web.xml 控制；同理 `@WebListener` 也是如此。通过 `ServletContext.addFilter` 动态注册的 `Filer` 和添加顺序保持一致。

